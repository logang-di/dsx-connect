
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Modular, scalable file scanning orchestration with pluggable connectors">
      
      
      
      
        <link rel="prev" href="../../authentication/">
      
      
        <link rel="next" href="../aws-s3/">
      
      
        
      
      
      <link rel="icon" href="../../../assets/dsx-connect-icon-white.svg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>Deploying DSX-Connect - DSX-Connect</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.618322db.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="light-blue" data-md-color-accent="amber">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#deploying-dsxconnect-helm" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="DSX-Connect" class="md-header__button md-logo" aria-label="DSX-Connect" data-md-component="logo">
      
  <img src="../../../assets/dsx-connect-icon-white.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            DSX-Connect
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Deploying DSX-Connect
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="light-blue" data-md-color-accent="amber"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="light-blue" data-md-color-accent="amber"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/logang-di/dsx-connect" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="DSX-Connect" class="md-nav__button md-logo" aria-label="DSX-Connect" data-md-component="logo">
      
  <img src="../../../assets/dsx-connect-icon-white.svg" alt="logo">

    </a>
    DSX-Connect
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/logang-di/dsx-connect" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../overview-quick-start/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Quick Start
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Connectors
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Connectors
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../connectors/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Index
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../connectors/concepts/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Connector Concepts
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../connectors/m365-email/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    M365 Email (Design)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../connectors/filesystem/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Filesystem (Overview)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../connectors/sharepoint-vs-onedrive.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SharePoint vs OneDrive
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Deployment
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Deployment
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1" >
        
          
          <label class="md-nav__link" for="__nav_4_1" id="__nav_4_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Docker Deployment
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Docker Deployment
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../docker/intro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Docker Best Practices
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../docker/dsx-connect/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    dsx-connect (Core)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_1_3" >
        
          
          <label class="md-nav__link" for="__nav_4_1_3" id="__nav_4_1_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Connector Deployments
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_1_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_1_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Connector Deployments
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../docker/aws-s3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AWS S3
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../docker/azure-blob/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Azure Blob Storage
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../docker/filesystem/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Filesystem
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../docker/google-cloud-storage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Google Cloud Storage
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../docker/sharepoint/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SharePoint
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../docker/salesforce.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Salesforce
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../docker/m365-mail/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    M365 Email
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../docker/onedrive.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OneDrive
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" checked>
        
          
          <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Kubernetes Deployment
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Kubernetes Deployment
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    General Tips
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started-quickstart/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Quick Tutorial
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started-quickstart-azure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Quick Tutorial 2
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../authentication/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Authentication
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    Deploying DSX-Connect
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Deploying DSX-Connect
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      
        Prerequisites
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#core-configuration-concepts" class="md-nav__link">
    <span class="md-ellipsis">
      
        Core Configuration Concepts
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Core Configuration Concepts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#global-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Global Configuration
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deployment-methods" class="md-nav__link">
    <span class="md-ellipsis">
      
        Deployment Methods
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Deployment Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#assumptions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Assumptions
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prerequisites-deploying-secrets" class="md-nav__link">
    <span class="md-ellipsis">
      
        Prerequisites - Deploying Secrets
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#method-1-quick-start-command-line-overrides" class="md-nav__link">
    <span class="md-ellipsis">
      
        Method 1: Quick Start (Command-Line Overrides)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#production-install-recommended-flags" class="md-nav__link">
    <span class="md-ellipsis">
      
        Production Install (recommended flags)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#method-2-standard-deployment-custom-values-file" class="md-nav__link">
    <span class="md-ellipsis">
      
        Method 2: Standard Deployment (Custom Values File)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Method 2: Standard Deployment (Custom Values File)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-combined-tls-authentication-dianna-values-production" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example: Combined TLS + Authentication + DIANNA values (production)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#method-3-production-grade-deployment-gitops-cicd" class="md-nav__link">
    <span class="md-ellipsis">
      
        Method 3: Production-Grade Deployment (GitOps &amp; CI/CD)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#scan-result-logging" class="md-nav__link">
    <span class="md-ellipsis">
      
        Scan Result Logging
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#packaging-publishing-helm" class="md-nav__link">
    <span class="md-ellipsis">
      
        Packaging &amp; Publishing (Helm)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Packaging &amp; Publishing (Helm)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#oci-install-prewired-image-tag" class="md-nav__link">
    <span class="md-ellipsis">
      
        OCI Install (prewired image tag)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-configuration-overriding-default-environment-variables" class="md-nav__link">
    <span class="md-ellipsis">
      
        Advanced Configuration: Overriding Default Environment Variables
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#client-trust-and-ca-bundles" class="md-nav__link">
    <span class="md-ellipsis">
      
        Client Trust and CA Bundles
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#verifying-the-deployment" class="md-nav__link">
    <span class="md-ellipsis">
      
        Verifying the Deployment
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#full-configuration-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      
        Full Configuration Parameters
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#minimal-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Minimal configuration
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Minimal configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#scanner-discovery-external-vs-incluster" class="md-nav__link">
    <span class="md-ellipsis">
      
        Scanner Discovery (External vs In‑Cluster)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#optional-example-dsxa-scanner" class="md-nav__link">
    <span class="md-ellipsis">
      
        Optional: Example DSXA Scanner
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#image-version-overrides" class="md-nav__link">
    <span class="md-ellipsis">
      
        Image Version Overrides
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#authentication-support" class="md-nav__link">
    <span class="md-ellipsis">
      
        Authentication Support
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Authentication Support">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#enrollment-token-via-secret-optional-but-recommended" class="md-nav__link">
    <span class="md-ellipsis">
      
        Enrollment Token via Secret (optional, but recommended)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dianna-api-token-via-secret-required-if-dianna-workers-enabled" class="md-nav__link">
    <span class="md-ellipsis">
      
        DIANNA API Token via Secret (required if DIANNA workers enabled)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#concurrency-and-replicas" class="md-nav__link">
    <span class="md-ellipsis">
      
        Concurrency and Replicas
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Concurrency and Replicas">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#practical-tuning-tips" class="md-nav__link">
    <span class="md-ellipsis">
      
        Practical Tuning Tips
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note-on-connector-replicas" class="md-nav__link">
    <span class="md-ellipsis">
      
        Note on Connector Replicas
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ingress-load-balancer-examples" class="md-nav__link">
    <span class="md-ellipsis">
      
        Ingress &amp; Load Balancer Examples
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2_6" >
        
          
          <label class="md-nav__link" for="__nav_4_2_6" id="__nav_4_2_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Connector Deployments (Helm)
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_4_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_2_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Connector Deployments (Helm)
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../helm/index.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Overview
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../aws-s3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AWS S3
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../azure-blob/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Azure Blob Storage
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../filesystem/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Filesystem
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../google-cloud-storage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Google Cloud Storage
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sharepoint/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SharePoint
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../salesforce/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Salesforce
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../helm/m365-mail.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    M365 Mail
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../onedrive/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    OneDrive
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../log-collectors/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Log Collectors
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Reference
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Reference
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/azure-credentials/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Azure Credentials
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/google-cloud-credentials/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Google Cloud Credentials
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/assets-and-filters/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Assets & Filters
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/advanced-kubernetes-network-security.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Advanced Kubernetes Network Security
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/display-icons/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    UI Display Icons
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/dsxa-sdk.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    DSXA Python SDK
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../reference/filters/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Filters (Details)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Case Studies
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    Case Studies
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../case-studies/windows-fileshares.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Scanning Windows Fileshares
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Developer's Guide
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Developer's Guide
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7_1" >
        
          
          <label class="md-nav__link" for="__nav_7_1" id="__nav_7_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Operations
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_7_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Operations
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../operations/kv-state/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Connector State KV
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequisites" class="md-nav__link">
    <span class="md-ellipsis">
      
        Prerequisites
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#core-configuration-concepts" class="md-nav__link">
    <span class="md-ellipsis">
      
        Core Configuration Concepts
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Core Configuration Concepts">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#global-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Global Configuration
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deployment-methods" class="md-nav__link">
    <span class="md-ellipsis">
      
        Deployment Methods
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Deployment Methods">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#assumptions" class="md-nav__link">
    <span class="md-ellipsis">
      
        Assumptions
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#prerequisites-deploying-secrets" class="md-nav__link">
    <span class="md-ellipsis">
      
        Prerequisites - Deploying Secrets
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#method-1-quick-start-command-line-overrides" class="md-nav__link">
    <span class="md-ellipsis">
      
        Method 1: Quick Start (Command-Line Overrides)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#production-install-recommended-flags" class="md-nav__link">
    <span class="md-ellipsis">
      
        Production Install (recommended flags)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#method-2-standard-deployment-custom-values-file" class="md-nav__link">
    <span class="md-ellipsis">
      
        Method 2: Standard Deployment (Custom Values File)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Method 2: Standard Deployment (Custom Values File)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example-combined-tls-authentication-dianna-values-production" class="md-nav__link">
    <span class="md-ellipsis">
      
        Example: Combined TLS + Authentication + DIANNA values (production)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#method-3-production-grade-deployment-gitops-cicd" class="md-nav__link">
    <span class="md-ellipsis">
      
        Method 3: Production-Grade Deployment (GitOps &amp; CI/CD)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#scan-result-logging" class="md-nav__link">
    <span class="md-ellipsis">
      
        Scan Result Logging
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#packaging-publishing-helm" class="md-nav__link">
    <span class="md-ellipsis">
      
        Packaging &amp; Publishing (Helm)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Packaging &amp; Publishing (Helm)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#oci-install-prewired-image-tag" class="md-nav__link">
    <span class="md-ellipsis">
      
        OCI Install (prewired image tag)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#advanced-configuration-overriding-default-environment-variables" class="md-nav__link">
    <span class="md-ellipsis">
      
        Advanced Configuration: Overriding Default Environment Variables
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#client-trust-and-ca-bundles" class="md-nav__link">
    <span class="md-ellipsis">
      
        Client Trust and CA Bundles
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#verifying-the-deployment" class="md-nav__link">
    <span class="md-ellipsis">
      
        Verifying the Deployment
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#full-configuration-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      
        Full Configuration Parameters
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#minimal-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Minimal configuration
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Minimal configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#scanner-discovery-external-vs-incluster" class="md-nav__link">
    <span class="md-ellipsis">
      
        Scanner Discovery (External vs In‑Cluster)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#optional-example-dsxa-scanner" class="md-nav__link">
    <span class="md-ellipsis">
      
        Optional: Example DSXA Scanner
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#image-version-overrides" class="md-nav__link">
    <span class="md-ellipsis">
      
        Image Version Overrides
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#authentication-support" class="md-nav__link">
    <span class="md-ellipsis">
      
        Authentication Support
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Authentication Support">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#enrollment-token-via-secret-optional-but-recommended" class="md-nav__link">
    <span class="md-ellipsis">
      
        Enrollment Token via Secret (optional, but recommended)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dianna-api-token-via-secret-required-if-dianna-workers-enabled" class="md-nav__link">
    <span class="md-ellipsis">
      
        DIANNA API Token via Secret (required if DIANNA workers enabled)
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#concurrency-and-replicas" class="md-nav__link">
    <span class="md-ellipsis">
      
        Concurrency and Replicas
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Concurrency and Replicas">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#practical-tuning-tips" class="md-nav__link">
    <span class="md-ellipsis">
      
        Practical Tuning Tips
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#note-on-connector-replicas" class="md-nav__link">
    <span class="md-ellipsis">
      
        Note on Connector Replicas
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ingress-load-balancer-examples" class="md-nav__link">
    <span class="md-ellipsis">
      
        Ingress &amp; Load Balancer Examples
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
                




  <nav class="md-path" aria-label="Navigation" >
    <ol class="md-path__list">
      
      
        
  
  
    
    
      
  
  
    
    
      <li class="md-path__item">
        <a href="../../docker/intro/" class="md-path__link">
          
  <span class="md-ellipsis">
    Deployment
  </span>

        </a>
      </li>
    
  

    
  

      
        
  
  
    
    
      <li class="md-path__item">
        <a href="../getting-started/" class="md-path__link">
          
  <span class="md-ellipsis">
    Kubernetes Deployment
  </span>

        </a>
      </li>
    
  

      
    </ol>
  </nav>

              
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="deploying-dsxconnect-helm">Deploying DSX‑Connect (Helm)<a class="headerlink" href="#deploying-dsxconnect-helm" title="Permanent link">&para;</a></h1>
<p>This Helm chart deploys the DSX‑Connect stack (API + workers + Redis +  rsyslog), with an optional in‑cluster DSXA scanner for local testing.</p>
<p>This guide explains the core configuration concepts and details three deployment methods, from a quick local test to a production-grade GitOps workflow.</p>
<h2 id="prerequisites">Prerequisites<a class="headerlink" href="#prerequisites" title="Permanent link">&para;</a></h2>
<ul>
<li>Kubernetes 1.19+ (a local cluster like Colima or Minikube is recommended for development).</li>
<li>Helm 3.2+</li>
<li><code>kubectl</code> configured to point to your cluster.</li>
<li><code>helm</code> for deploying helm charts</li>
<li><code>openssl</code> for generating a self-signed certificate if you plan to enable TLS for development.</li>
<li>A dsx-connect chart release.  </li>
</ul>
<hr />
<h2 id="core-configuration-concepts">Core Configuration Concepts<a class="headerlink" href="#core-configuration-concepts" title="Permanent link">&para;</a></h2>
<p>NOTE: all of the following assumes that the user has a dsx-connect chart release.</p>
<p>The helm chart provided with DSX-Connect releases can be used to deploy the entire DSX‑Connect stack. The default <code>value.yaml</code> and
<code>values-dev.yaml</code> serve as good guides for the most common deployment cases.</p>
<h3 id="global-configuration">Global Configuration<a class="headerlink" href="#global-configuration" title="Permanent link">&para;</a></h3>
<p>The following is the global configuration section of the default <code>values.yaml</code> file.  This is a fullstack deployment
that DOES NOT deploy the DSXA scanner:
<div class="highlight"><pre><span></span><code><span class="nt">global</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># Minimal, common env most users need to touch. Everything else is set in templates with sane defaults.</span>
<span class="w">  </span><span class="nt">env</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># REQUIRED when (dsxa-scanner.enabled=false): set to your external DSXA endpoint</span>
<span class="w">    </span><span class="nt">DSXCONNECT_SCANNER__SCAN_BINARY_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://external-dsxa:5000/scan/binary/v2&quot;</span>
<span class="w">    </span><span class="c1"># Results/stats DB URL (redis://... =&gt; Redis, anything else =&gt; in-memory)</span>
<span class="w">    </span><span class="nt">DSXCONNECT_RESULTS_DB</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">redis://redis:6379/3</span>

<span class="w">  </span><span class="c1"># Optional shared image defaults (components fall back to these when set)</span>
<span class="w">  </span><span class="nt">image</span><span class="p">:</span>
<span class="w">    </span><span class="nt">repository</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">dsxconnect/dsx-connect</span>
<span class="w">    </span><span class="nt">tag</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="w">    </span><span class="nt">pullPolicy</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">IfNotPresent</span>
<span class="w">    </span><span class="c1"># Note: When installing from an OCI chart with --version=X.Y.Z, the default image tag will be that chart&#39;s appVersion.</span>
</code></pre></div></p>
<p>The most common settings to be configured are in the <code>global</code> section.  Deployments will need to supply:</p>
<ul>
<li>global.image.tag: the version of dsx-connect to deploy</li>
<li>global.env.DSXCONNECT_SCANNER__SCAN_BINARY_URL: if using an external (not deployed via this helm) DSXA scanner</li>
</ul>
<p>The <code>values-dev.yaml</code> file is a good starting point for local testing.  The key difference is that it sets <code>dsxa-scanner.enabled=true</code> and <code>global.env.DSXCONNECT_SCANNER__SCAN_BINARY_URL=""</code> in which case a single DSXA scanner is deployed into the same cluster.</p>
<div class="highlight"><pre><span></span><code><span class="nt">global</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># Minimal, common env most users need to touch. Everything else is set in templates with sane defaults.</span>
<span class="w">  </span><span class="nt">env</span><span class="p">:</span>
<span class="w">    </span><span class="nt">DSXCONNECT_SCANNER__SCAN_BINARY_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">...</span>
<span class="c1"># typical deployments would have dsxa-scanners in their own cluster and namespace, but for if all that&#39;s needed</span>
<span class="c1"># is a single dsxa-scanner pod that only supports scan/binary/v2 (file size &lt;= 2GB), then enable here.</span>
<span class="nt">dsxa-scanner</span><span class="p">:</span>
<span class="w">  </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div>
<h2 id="deployment-methods">Deployment Methods<a class="headerlink" href="#deployment-methods" title="Permanent link">&para;</a></h2>
<p>This chart is flexible. The following methods show how to deploy it, from a simple test to a production-grade workflow.</p>
<h3 id="assumptions">Assumptions<a class="headerlink" href="#assumptions" title="Permanent link">&para;</a></h3>
<p>In the following guide assumed that the release name used is "dsx" and the namespace is the <code>default</code> namespace.  for example:
<div class="highlight"><pre><span></span><code>helm<span class="w"> </span>upgrade<span class="w"> </span>--install<span class="w"> </span>dsx<span class="w"> </span>&lt;helm<span class="w"> </span>root<span class="w"> </span>directory&gt;<span class="w"> </span>-f<span class="w"> </span>&lt;helm<span class="w"> </span>root<span class="w"> </span>directory&gt;/values.yaml<span class="w"> </span>&lt;<span class="nb">command</span><span class="w"> </span>line<span class="w"> </span>arguments&gt;
</code></pre></div>
If you use a different release name, change secrets and values files accordingly.
If you deploy to a different namespace, add <code>-n &lt;namespace&gt;</code> to your <code>kubectl</code> and <code>helm upgrade --install</code> commands, and create Secrets in that namespace.</p>
<h3 id="prerequisites-deploying-secrets">Prerequisites - Deploying Secrets<a class="headerlink" href="#prerequisites-deploying-secrets" title="Permanent link">&para;</a></h3>
<p>Before starting the dsx-connect deployment, create the supporting Secrets if you plan to enable TLS, connector authentication, or DIANNA.</p>
<p><strong>1. Create the TLS Certificate Secret (if enabling TLS):</strong>
Edit <code>examples/secrets/tls-secret.yaml</code> (sample provided with the chart) or create your own. The chart expects a Secret named <code>&lt;release&gt;-dsx-connect-api-tls</code> (e.g., <code>dsx-dsx-connect-api-tls</code> when the release is <code>dsx</code>).
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Secret</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;release&gt;-dsx-connect-api-tls</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;your-namespace&gt;</span>
<span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kubernetes.io/tls</span>
<span class="nt">data</span><span class="p">:</span>
<span class="w">  </span><span class="nt">tls.crt</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;base64-encoded-cert&gt;</span>
<span class="w">  </span><span class="nt">tls.key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;base64-encoded-key&gt;</span>
</code></pre></div>
Apply the Secret before deploying the dsx-connect stack:
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>examples/secrets/tls-secret.yaml
</code></pre></div></p>
<p><strong>2. Create the Enrollment Token Secret (if enabling Authentication):</strong>
Edit <code>examples/secrets/auth-enrollment-secret.yaml</code> (sample provided). The secret name should be <code>&lt;release&gt;-dsx-connect-api-auth-enrollment</code> unless you override it in values (example release <code>dsx</code> → <code>dsx-dsx-connect-api-auth-enrollment</code>).
The enrollment can be any alphanumeric string, ideally a long random string, such as a UUID. 
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Secret</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;release&gt;-dsx-connect-api-auth-enrollment</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;your-namespace&gt;</span>
<span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Opaque</span>
<span class="nt">stringData</span><span class="p">:</span>
<span class="w">  </span><span class="c1"># REQUIRED: the enrollment token</span>
<span class="w">  </span><span class="nt">token</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;enrollment-token&gt;</span>
</code></pre></div></p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>examples/secrets/auth-enrollment-secret.yaml
</code></pre></div>
<p><strong>3. Create the DIANNA API Secret:</strong>
Edit <code>examples/secrets/di-api-secret.yaml</code> (sample provided) with your DI API token and management URL, then apply it. The sample Secret is named <code>di-api</code>; set <code>global.dianna.secretName</code> (and optionally <code>dsx-connect-dianna-worker.dianna.secretName</code>) if you use a different name.
<div class="highlight"><pre><span></span><code><span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1</span>
<span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Secret</span>
<span class="nt">metadata</span><span class="p">:</span>
<span class="w">  </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">di-api</span>
<span class="w">  </span><span class="nt">namespace</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;your-namespace&gt;</span>
<span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Opaque</span>
<span class="nt">stringData</span><span class="p">:</span>
<span class="w">  </span><span class="nt">apiToken</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&lt;di-token&gt;&quot;</span>
<span class="w">  </span><span class="nt">managementUrl</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://di.example.com&quot;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>examples/secrets/di-api-secret.yaml
</code></pre></div></p>
<p>Configure the chart to read this Secret at install time, for example:</p>
<div class="highlight"><pre><span></span><code>helm<span class="w"> </span>upgrade<span class="w"> </span>--install<span class="w"> </span>dsx<span class="w"> </span>.<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--set-string<span class="w"> </span>global.dianna.secretName<span class="o">=</span>di-api
</code></pre></div>
<h3 id="method-1-quick-start-command-line-overrides">Method 1: Quick Start (Command-Line Overrides)<a class="headerlink" href="#method-1-quick-start-command-line-overrides" title="Permanent link">&para;</a></h3>
<p>This method is best for quick, temporary deployments, like for local testing. It uses the <code>--set</code> flag to provide configuration directly on the command line.</p>
<p><strong>4. Deploy the Stack:</strong>
*   <strong>Simplest deployment: deploys DSXA scanner and dsx-connect on the same cluster:</strong>
    Development mode deployment with a local DSXA scanner.  Use the <code>values-dev.yaml</code> (or copy it) to set deploy dsx-connect with a dsxa-scanner.<br />
    You can change the values in <code>values-dev.yaml</code> to match your environment,
    but, overriding values in the command line allows for flexible deployment.  In this case the only
    setting that needs to be set is global.image.tag.
    <div class="highlight"><pre><span></span><code>helm<span class="w"> </span>upgrade<span class="w"> </span>--install<span class="w"> </span>dsx<span class="w"> </span>.<span class="w"> </span>-n<span class="w"> </span>&lt;namespace&gt;<span class="w"> </span>-f<span class="w"> </span>values-dev.yaml<span class="w"> </span>--set-string<span class="w"> </span>global.image.tag<span class="o">=</span><span class="m">0</span>.2.82
</code></pre></div></p>
<ul>
<li>
<p><strong>Using an external DSX/A Scanner, HTTP deployment:</strong>
    In this case, using the values.yaml (the default), DSXA scanner is not deployed, so the scan binary URL must be set.
    You can either edit the values.yaml, or copy it and edit, or simply pass in settings on the helm arguments:
    <div class="highlight"><pre><span></span><code>helm<span class="w"> </span>upgrade<span class="w"> </span>--install<span class="w"> </span>dsx<span class="w"> </span>-n<span class="w"> </span>&lt;namespace&gt;<span class="w"> </span>-f<span class="w"> </span>values.yaml<span class="w"> </span>--set-string<span class="w"> </span>global.image.tag<span class="o">=</span><span class="m">0</span>.2.82
<span class="w">  </span>--set-string<span class="w"> </span>global.env.DSXCONNECT_SCANNER__SCAN_BINARY_URL<span class="o">=</span>http://my-dsxa-url:5000/scan/binary/v2
</code></pre></div></p>
</li>
<li>
<p><strong>For a TLS-enabled deployment:</strong>
    ```bash
    helm upgrade --install dsx . -n <namespace> \
      --set-string
      --set dsx-connect-api.tls.enabled=true \
      --set dsx-connect-api.tls.secretName=my-dsx-connect-api-tls \
      --set-string global.env.DSXCONNECT_SCANNER__SCAN_BINARY_URL=https://my-dsxa.example.com/scan/binary/v2</p>
</li>
<li>
<p><strong>For an Authentication-enabled (enrollment) deployment:</strong>
    <div class="highlight"><pre><span></span><code>helm<span class="w"> </span>upgrade<span class="w"> </span>--install<span class="w"> </span>dsx<span class="w"> </span>.<span class="w"> </span>-n<span class="w"> </span>&lt;namespace&gt;<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--set-string<span class="w"> </span>global.image.tag<span class="o">=</span><span class="m">0</span>.2.82<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--set<span class="w"> </span>dsx-connect-api.auth.enabled<span class="o">=</span><span class="nb">true</span>
</code></pre></div></p>
</li>
<li>
<p><strong>For a DIANNA-enabled deployment:</strong>
    <div class="highlight"><pre><span></span><code>helm<span class="w"> </span>upgrade<span class="w"> </span>--install<span class="w"> </span>dsx<span class="w"> </span>.<span class="w"> </span>-n<span class="w"> </span>&lt;namespace&gt;<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--set-string<span class="w"> </span>global.image.tag<span class="o">=</span><span class="m">0</span>.2.82<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--set<span class="w"> </span>dsx-connect-dianna-worker.enabled<span class="o">=</span><span class="nb">true</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--set-string<span class="w"> </span>global.dianna.secretName<span class="o">=</span>di-api
</code></pre></div></p>
</li>
<li>
<p><strong>Combined TLS + Authentication + DIANNA (CLI):</strong>
    <div class="highlight"><pre><span></span><code><span class="c1"># Pre-create the required secrets</span>
kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>examples/secrets/auth-enrollment-secret.yaml
kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>examples/secrets/di-api-secret.yaml
kubectl<span class="w"> </span>create<span class="w"> </span>secret<span class="w"> </span>tls<span class="w"> </span>my-dsx-connect-api-tls<span class="w"> </span>--cert<span class="o">=</span>tls.crt<span class="w"> </span>--key<span class="o">=</span>tls.key

<span class="c1"># Install with TLS + Auth + DIANNA enabled</span>
helm<span class="w"> </span>upgrade<span class="w"> </span>--install<span class="w"> </span>dsx<span class="w"> </span>.<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--set-string<span class="w"> </span>global.image.tag<span class="o">=</span><span class="m">0</span>.2.82<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--set-string<span class="w"> </span>global.env.DSXCONNECT_SCANNER__SCAN_BINARY_URL<span class="o">=</span>https://external-dsxa.example.com/scan/binary/v2<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--set<span class="w"> </span>dsx-connect-api.tls.enabled<span class="o">=</span><span class="nb">true</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--set<span class="w"> </span>dsx-connect-api.tls.secretName<span class="o">=</span>my-dsx-connect-api-tls<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--set<span class="w"> </span>dsx-connect-api.auth.enabled<span class="o">=</span><span class="nb">true</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--set<span class="w"> </span>dsx-connect-dianna-worker.enabled<span class="o">=</span><span class="nb">true</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--set-string<span class="w"> </span>global.dianna.secretName<span class="o">=</span>di-api
</code></pre></div>
    ```</p>
</li>
</ul>
<h3 id="production-install-recommended-flags">Production Install (recommended flags)<a class="headerlink" href="#production-install-recommended-flags" title="Permanent link">&para;</a></h3>
<p>Use the production defaults in <code>values.yaml</code> and set the external DSXA URL explicitly. Also pin the image tag for reproducibility.</p>
<div class="highlight"><pre><span></span><code>helm<span class="w"> </span>upgrade<span class="w"> </span>--install<span class="w"> </span>dsx<span class="w"> </span>dsx_connect/deploy/helm<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-f<span class="w"> </span>dsx_connect/deploy/helm/values.yaml<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--set-string<span class="w"> </span>global.env.DSXCONNECT_SCANNER__SCAN_BINARY_URL<span class="o">=</span>https://my-dsxa.example.com/scan/binary/v2<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--set-string<span class="w"> </span>global.image.tag<span class="o">=</span><span class="m">0</span>.2.66
</code></pre></div>
<h3 id="method-2-standard-deployment-custom-values-file">Method 2: Standard Deployment (Custom Values File)<a class="headerlink" href="#method-2-standard-deployment-custom-values-file" title="Permanent link">&para;</a></h3>
<p>This is the most common and recommended method for managing deployments. It involves creating a dedicated values file for each instance of the connector.</p>
<p><strong>1. Create the Required Secrets:</strong>
- TLS (if enabling HTTPS for the API):
  <div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>create<span class="w"> </span>secret<span class="w"> </span>tls<span class="w"> </span>my-dsx-connect-api-tls<span class="w"> </span>--cert<span class="o">=</span>tls.crt<span class="w"> </span>--key<span class="o">=</span>tls.key
</code></pre></div>
- Enrollment token (if enabling Authentication):
  <div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>examples/secrets/auth-enrollment-secret.yaml
</code></pre></div>
- DIANNA API token (if enabling DI workers):
  <div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>examples/secrets/di-api-secret.yaml
</code></pre></div></p>
<p><strong>2. Create a Custom Values File:</strong>
Create a new file, for example <code>my-dsx-connect-values.yaml</code>, to hold your configuration.</p>
<p>```yaml
   # my-dsx-connect-values.yaml</p>
<p>global:
     env:
       # REQUIRED when dsxa-scanner.enabled=false (default): point to your external DSXA
       DSXCONNECT_SCANNER__SCAN_BINARY_URL: "http://external-dsxa:5000/scan/binary/v2"
     dianna:
       secretName: "di-api"                              # Secret created from examples/secrets/di-api-secret.yaml
       managementUrlKey: managementUrl                   # Omit if you kept the default key name
       apiTokenKey: apiToken                             # Omit if you kept the default key name
       verifyTls: true
       caBundle: ""                                      # optional path if you mount a custom CA
       chunkSize: 4194304                                # bytes
       timeout: 60                                       # seconds
       autoOnMalicious: false
     scanner:
       # serviceName: "dsx-connect-dsxa-scanner"  # defaults to "<release>-dsxa-scanner"
       # port: 5000
       # scheme: http</p>
<p>dsx-connect-api:
     tls:
       enabled: true
       secretName: "my-dsx-connect-api-tls"
     auth:
       enabled: true
       enrollment:
         key: ENROLLMENT_TOKEN
      # value: ""  # leave empty when providing Secret via examples/secrets/auth-enrollment-secret.yaml
     env:
       LOG_LEVEL: info</p>
<p>dsx-connect-scan-request-worker:
     enabled: true
     env:
       LOG_LEVEL: info
     celery:
       concurrency: 2</p>
<p>dsx-connect-dianna-worker:
     enabled: true
     env:
       LOG_LEVEL: info
     celery:
       # override only if you changed naming; default queue prefix is "dev"
       # queue: "custom-prefix.dsx_connect.analyze.dianna"
       concurrency: 2</p>
<p># Example: do not hardcode secrets here in production. Prefer pulling from a
  # Kubernetes Secret at install time as shown above.</p>
<p># ... configure other workers, redis, syslog as needed
   ```</p>
<p><strong>3. Install the Chart:</strong>
Install the chart, referencing your custom values file with the <code>-f</code> flag.
   <div class="highlight"><pre><span></span><code>helm<span class="w"> </span>install<span class="w"> </span>dsx-connect<span class="w"> </span>.<span class="w"> </span>-f<span class="w"> </span>my-dsx-connect-values.yaml
</code></pre></div></p>
<h4 id="example-combined-tls-authentication-dianna-values-production">Example: Combined TLS + Authentication + DIANNA values (production)<a class="headerlink" href="#example-combined-tls-authentication-dianna-values-production" title="Permanent link">&para;</a></h4>
<div class="highlight"><pre><span></span><code><span class="c1"># values-prod.yaml</span>
<span class="nt">global</span><span class="p">:</span>
<span class="w">  </span><span class="nt">env</span><span class="p">:</span>
<span class="w">    </span><span class="nt">DSXCONNECT_SCANNER__SCAN_BINARY_URL</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://external-dsxa.example.com/scan/binary/v2&quot;</span>
<span class="w">  </span><span class="nt">dianna</span><span class="p">:</span>
<span class="w">    </span><span class="nt">secretName</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;di-api&quot;</span>
<span class="w">    </span><span class="nt">managementUrlKey</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">managementUrl</span>
<span class="w">    </span><span class="nt">apiTokenKey</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">apiToken</span>
<span class="w">    </span><span class="nt">verifyTls</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">chunkSize</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4194304</span>
<span class="w">    </span><span class="nt">timeout</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">60</span>
<span class="w">    </span><span class="nt">autoOnMalicious</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>

<span class="nt">dsx-connect-api</span><span class="p">:</span>
<span class="w">  </span><span class="nt">tls</span><span class="p">:</span>
<span class="w">    </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">secretName</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;my-dsx-connect-api-tls&quot;</span>
<span class="w">  </span><span class="nt">auth</span><span class="p">:</span>
<span class="w">    </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">enrollment</span><span class="p">:</span>
<span class="w">      </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ENROLLMENT_TOKEN</span>
<span class="w">      </span><span class="c1"># value: &quot;&quot;  # leave empty; provide Secret via examples/secrets/auth-enrollment-secret.yaml</span>
<span class="w">  </span><span class="nt">env</span><span class="p">:</span>
<span class="w">    </span><span class="nt">LOG_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">info</span>

<span class="nt">dsx-connect-scan-request-worker</span><span class="p">:</span>
<span class="w">  </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="nt">env</span><span class="p">:</span>
<span class="w">    </span><span class="nt">LOG_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">info</span>
<span class="w">  </span><span class="nt">celery</span><span class="p">:</span>
<span class="w">    </span><span class="nt">concurrency</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>

<span class="nt">dsx-connect-dianna-worker</span><span class="p">:</span>
<span class="w">  </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="nt">env</span><span class="p">:</span>
<span class="w">    </span><span class="nt">LOG_LEVEL</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">info</span>
<span class="w">  </span><span class="nt">celery</span><span class="p">:</span>
<span class="w">    </span><span class="nt">concurrency</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
</code></pre></div>
<p>Install:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>examples/secrets/auth-enrollment-secret.yaml
kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>examples/secrets/di-api-secret.yaml
kubectl<span class="w"> </span>create<span class="w"> </span>secret<span class="w"> </span>tls<span class="w"> </span>my-dsx-connect-api-tls<span class="w"> </span>--cert<span class="o">=</span>tls.crt<span class="w"> </span>--key<span class="o">=</span>tls.key

helm<span class="w"> </span>upgrade<span class="w"> </span>--install<span class="w"> </span>dsx<span class="w"> </span>.<span class="w"> </span>-f<span class="w"> </span>values-prod.yaml<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--set-string<span class="w"> </span>global.image.tag<span class="o">=</span>&lt;version&gt;
</code></pre></div>
<h3 id="method-3-production-grade-deployment-gitops-cicd">Method 3: Production-Grade Deployment (GitOps &amp; CI/CD)<a class="headerlink" href="#method-3-production-grade-deployment-gitops-cicd" title="Permanent link">&para;</a></h3>
<p>This is the definitive, scalable, and secure approach for managing production applications. It uses modern Continuous Delivery (CD) mechanisms.</p>
<p><strong>The Philosophy:</strong>
Instead of running <code>helm</code> commands manually, you declare the desired state of your application in a Git repository. A GitOps tool (like <strong>Argo CD</strong> or <strong>Flux</strong>) runs in your cluster, monitors the repository, and automatically syncs the cluster state to match what is defined in Git.</p>
<p><strong>The Workflow:</strong>
This involves storing environment-specific values files (e.g., <code>values-prod.yaml</code>) in a separate GitOps repository. The GitOps tool then uses these files to automate Helm deployments, providing a fully auditable and declarative system for managing your application lifecycle.</p>
<hr />
<h2 id="scan-result-logging">Scan Result Logging<a class="headerlink" href="#scan-result-logging" title="Permanent link">&para;</a></h2>
<p>The <code>dsx-connect-results-worker</code> component is responsible for logging scan results to syslog.  By default, it sends syslog over TCP to port 514.</p>
<p>This helm chart includes
a rsyslog service that can be used to collect scan results within the cluster.  The rsyslog service is enabled
by default, but can be disabled by setting <code>rsyslog.enabled=false</code> in the <code>values.yaml</code> file.</p>
<p>If you need to change the default configuration or chose to send scan results to other collectors, see the file:
See the APPENDIX-LOG-COLLECTORS.md file for more information.</p>
<hr />
<h2 id="packaging-publishing-helm">Packaging &amp; Publishing (Helm)<a class="headerlink" href="#packaging-publishing-helm" title="Permanent link">&para;</a></h2>
<p>You have a few good options to distribute this umbrella chart so others can install it with a single Helm command.</p>
<ul>
<li>Option A — OCI registry (recommended if you already push Docker images)<ul>
<li>Package: <code>inv helm-package</code> (outputs <code>dist/charts/dsx-connect-&lt;ver&gt;.tgz</code>)</li>
<li>Login: <code>helm registry login registry-1.docker.io -u &lt;user&gt;</code></li>
<li>Push: <code>inv helm-push-oci --repo=oci://registry-1.docker.io/dsxconnect</code></li>
<li>Install: <code>helm install dsx-connect oci://registry-1.docker.io/dsxconnect/dsx-connect-chart --version &lt;ver&gt; -f values.yaml</code></li>
<li>Pros: lives alongside container images, easy auth, immutable versions.</li>
</ul>
</li>
</ul>
<h3 id="oci-install-prewired-image-tag">OCI Install (prewired image tag)<a class="headerlink" href="#oci-install-prewired-image-tag" title="Permanent link">&para;</a></h3>
<p>When installing from OCI with <code>--version X.Y.Z</code>, the chart at that version is pulled and its <code>appVersion</code> is used as the default image tag. In other words, versions are prewired — the Helm chart version selects the matching image tag by default. You can still override via <code>--set-string global.image.tag=...</code> if needed.</p>
<ul>
<li>
<p>Option B — Static Helm repo (e.g., GitHub Pages)</p>
<ul>
<li>Package: <code>inv helm-package</code></li>
<li>Index: <code>inv helm-repo-index --base-url=https://&lt;org&gt;.github.io/&lt;repo&gt;/charts</code></li>
<li>Publish: upload contents of <code>dist/charts/</code> (including <code>index.yaml</code>) to your site (e.g., <code>gh-pages/charts/</code>)</li>
<li>Use: <code>helm repo add dsx https://&lt;org&gt;.github.io/&lt;repo&gt;/charts &amp;&amp; helm install dsx-connect dsx/dsx-connect --version &lt;ver&gt;</code></li>
<li>Pros: public/simple distribution, no auth required.</li>
</ul>
</li>
<li>
<p>Option C — Zip/attach chart in a release bundle</p>
<ul>
<li>Package: <code>inv helm-package</code>; attach tgz to a GitHub release or bundle artifact.</li>
<li>Use: <code>helm install dsx-connect ./dsx-connect-&lt;ver&gt;.tgz</code></li>
<li>Pros: lightweight for ad‑hoc distribution, but no repo metadata.</li>
</ul>
</li>
</ul>
<p>The Invoke tasks (<code>inv helm-package</code>, <code>inv helm-push-oci</code>, <code>inv helm-repo-index</code>) are provided to standardize the packaging flow. Choose the publishing method that best fits your environment and CI/CD.</p>
<h2 id="advanced-configuration-overriding-default-environment-variables">Advanced Configuration: Overriding Default Environment Variables<a class="headerlink" href="#advanced-configuration-overriding-default-environment-variables" title="Permanent link">&para;</a></h2>
<p>Many environment variables have sensible default values set directly within the component templates. These defaults align with the <code>docker-compose-dsx-connect-all-services.yaml</code> configuration. You only need to override them if your deployment requires a different value.</p>
<p>To override a default environment variable, specify it under the <code>env</code> section of the respective component in your custom <code>values.yaml</code> file.</p>
<p><strong>Commonly Overridden Variables (and their defaults):</strong></p>
<ul>
<li>API keys removed (use JWT/HMAC flows instead)</li>
<li><strong><code>DSXCONNECT_SCANNER__SCAN_BINARY_URL</code></strong>: REQUIRED when <code>dsxa-scanner.enabled=false</code> (the default). If you enable <code>dsxa-scanner</code>, templates compute <code>http(s)://&lt;release&gt;-dsxa-scanner:&lt;port&gt;/scan/binary/v2</code> using <code>global.scanner</code>.</li>
<li><strong><code>DSXCONNECT_WORKERS__BROKER</code></strong>: <code>redis://redis:6379/5</code></li>
<li><strong><code>DSXCONNECT_WORKERS__BACKEND</code></strong>: <code>redis://redis:6379/6</code></li>
<li><strong><code>DSXCONNECT_REDIS_URL</code></strong>: <code>redis://redis:6379/3</code></li>
<li><strong><code>DSXCONNECT_RESULTS_DB</code></strong>: <code>redis://redis:6379/3</code></li>
<li><strong><code>DSXCONNECT_RESULTS_DB__RETAIN</code></strong>: <code>100</code></li>
<li>Results/Stats DB: controlled by <code>DSXCONNECT_RESULTS_DB</code> (redis://… for Redis, else in-memory)</li>
<li><strong><code>PYTHONUNBUFFERED</code></strong>: <code>1</code></li>
<li><strong><code>LOG_LEVEL</code></strong>: <code>debug</code> (for API), <code>warning</code> (for workers)</li>
</ul>
<p><strong>Specific Worker Overrides:</strong></p>
<ul>
<li><strong><code>dsx-connect-results-worker</code>:</strong><ul>
<li><code>DSXCONNECT_SCAN_RESULT_TASK_WORKER__SYSLOG_SERVER_URL</code>: <code>rsyslog</code></li>
<li><code>DSXCONNECT_SCAN_RESULT_TASK_WORKER__SYSLOG_SERVER_PORT</code>: <code>514</code></li>
</ul>
</li>
</ul>
<hr />
<h2 id="client-trust-and-ca-bundles">Client Trust and CA Bundles<a class="headerlink" href="#client-trust-and-ca-bundles" title="Permanent link">&para;</a></h2>
<p>When clients (like the Azure Blob Storage Connector) communicate with the <code>dsx-connect-api</code> server over HTTPS, they must be able to verify the server's identity. If the <code>dsx-connect-api</code> server is using a certificate from an internal or self-signed Certificate Authority (CA), you must provide that CA's certificate to each client in a <strong>CA Bundle</strong>.</p>
<p><strong>Encryption vs. Authentication:</strong>
It is important to understand that even with <code>verify=false</code>, the connection is still <strong>encrypted</strong>. However, without verification, the identity of the server is not <strong>authenticated</strong>. This leaves you vulnerable to man-in-the-middle attacks. <strong>Using a CA bundle to verify the connection is critical for security.</strong></p>
<p><strong>Procedure for Clients (e.g., Azure Blob Storage Connector):</strong></p>
<ol>
<li>
<p><strong>Obtain the CA Certificate:</strong> Get the public certificate file (e.g., <code>ca.crt</code>) of the CA that signed your <code>dsx-connect-api</code> server's certificate.</p>
</li>
<li>
<p><strong>Create a Secret from the CA Certificate:</strong>
    <div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>create<span class="w"> </span>secret<span class="w"> </span>generic<span class="w"> </span>dsx-connect-ca<span class="w"> </span>--from-file<span class="o">=</span>ca.crt<span class="o">=</span>/path/to/your/ca.crt
</code></pre></div></p>
</li>
<li>
<p><strong>Configure the Client's Helm Chart:</strong>
    Refer to the client's (e.g., <code>connectors/azure_blob_storage/deploy/helm/DEVELOPER_README.md</code>) documentation for how to configure its <code>DSXCONNECTOR_CA_BUNDLE</code> and <code>DSXCONNECTOR_VERIFY_TLS</code> settings to trust this CA.</p>
</li>
</ol>
<hr />
<h2 id="verifying-the-deployment">Verifying the Deployment<a class="headerlink" href="#verifying-the-deployment" title="Permanent link">&para;</a></h2>
<p>After deploying with any method, you can check the status of your release.</p>
<ol>
<li>
<p><strong>Check the Helm Release:</strong>
    <div class="highlight"><pre><span></span><code>helm<span class="w"> </span>list
</code></pre></div></p>
</li>
<li>
<p><strong>Check the Pods:</strong>
    <div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>get<span class="w"> </span>pods
</code></pre></div></p>
</li>
</ol>
<h2 id="full-configuration-parameters">Full Configuration Parameters<a class="headerlink" href="#full-configuration-parameters" title="Permanent link">&para;</a></h2>
<p>For a full list of configurable parameters for all components, see the <code>values.yaml</code> file.</p>
<p>Commonly tuned values (by component):</p>
<ul>
<li>Global<ul>
<li><code>global.image.tag</code>: pin a specific image tag for all components.</li>
<li><code>global.env.DSXCONNECT_SCANNER__SCAN_BINARY_URL</code>: REQUIRED when <code>dsxa-scanner.enabled=false</code> (external DSXA).</li>
<li><code>dsx-connect-dianna-worker.dianna.*</code>: DIANNA settings for the DI worker; map directly to <code>DSXCONNECT_DIANNA__*</code> env.</li>
</ul>
</li>
<li>API<ul>
<li><code>dsx-connect-api.tls.enabled</code>: enable HTTPS for the API. Certs are loaded from Secret <code>&lt;release&gt;-dsx-connect-api-tls</code> and mounted at <code>/app/certs</code>; HTTPS listens on 443.</li>
<li><code>dsx-connect-api.auth.enabled</code> + <code>dsx-connect-api.auth.enrollment.{key,value}</code>: enable HMAC auth and set enrollment token.</li>
</ul>
</li>
<li>Workers<ul>
<li><code>dsx-connect-*-worker.celery.concurrency</code>: per‑worker parallelism inside a pod.</li>
<li><code>dsx-connect-*-worker.replicaCount</code>: number of pods (horizontal scale/HA).</li>
</ul>
</li>
<li>DIANNA<ul>
<li><code>dsx-connect-dianna-worker</code>: set <code>enabled</code>, <code>celery.concurrency</code>, and the <code>dianna.*</code> values for this worker.</li>
</ul>
</li>
</ul>
<h2 id="minimal-configuration">Minimal configuration<a class="headerlink" href="#minimal-configuration" title="Permanent link">&para;</a></h2>
<p>For most deployments you only need to set a few environment values once, at the top-level <code>values.yaml</code> under <code>global.env</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nt">global</span><span class="p">:</span>
<span class="w">  </span><span class="nt">env</span><span class="p">:</span>
<span class="w">    </span><span class="c1"># Optional: only set if pointing to an external DSXA; otherwise dsx-connect auto-targets</span>
<span class="w">    </span><span class="c1"># the in-cluster DSXA service when `dsxa-scanner.enabled=true`.</span>
<span class="w">    </span><span class="c1"># DSXCONNECT_SCANNER__SCAN_BINARY_URL: &quot;http://&lt;external-dsxa-host&gt;:5000/scan/binary/v2&quot;</span>
</code></pre></div>
<p>All other settings have sensible defaults baked into the component templates (Redis URLs, DB paths, etc.). You can still override per‑service <code>env</code> keys if needed, but typically the defaults are fine.</p>
<h3 id="scanner-discovery-external-vs-incluster">Scanner Discovery (External vs In‑Cluster)<a class="headerlink" href="#scanner-discovery-external-vs-incluster" title="Permanent link">&para;</a></h3>
<ul>
<li>Default (external DSXA): <code>dsxa-scanner.enabled=false</code> (values default). You must set <code>global.env.DSXCONNECT_SCANNER__SCAN_BINARY_URL</code> to your DSXA endpoint.</li>
<li>In‑cluster (local testing): enable <code>dsxa-scanner.enabled=true</code>. API and workers default to <code>http(s)://&lt;release&gt;-dsxa-scanner:&lt;port&gt;/scan/binary/v2</code>, guided by <code>global.scanner</code> hints (service name/port/scheme). You can still override the env if needed.</li>
</ul>
<p>Override examples:</p>
<ul>
<li>All components:</li>
<li><code>--set-string global.env.DSXCONNECT_SCANNER__SCAN_BINARY_URL=http://external-dsxa:5000/scan/binary/v2</code></li>
<li>Only API:</li>
<li><code>--set-string dsx-connect-api.env.DSXCONNECT_SCANNER__SCAN_BINARY_URL=http://external-dsxa:5000/scan/binary/v2</code></li>
</ul>
<h2 id="optional-example-dsxa-scanner">Optional: Example DSXA Scanner<a class="headerlink" href="#optional-example-dsxa-scanner" title="Permanent link">&para;</a></h2>
<p>For quick local testing, this chart can deploy a single DSXA scanner pod (not production). Enable it and DSX‑connect will default its scanner URL to that in‑cluster service name.</p>
<ul>
<li>
<p>Enable in <code>values.yaml</code>:
  <div class="highlight"><pre><span></span><code><span class="nt">dsxa-scanner</span><span class="p">:</span>
<span class="w">  </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div></p>
</li>
<li>
<p>Or via CLI:
  <div class="highlight"><pre><span></span><code>helm<span class="w"> </span>upgrade<span class="w"> </span>--install<span class="w"> </span>dsx<span class="w"> </span>.<span class="w"> </span>-f<span class="w"> </span>values.yaml<span class="w"> </span>--set<span class="w"> </span>dsxa-scanner.enabled<span class="o">=</span><span class="nb">true</span>
</code></pre></div></p>
</li>
</ul>
<p>When enabled, API and workers default to:
<code>DSXCONNECT_SCANNER__SCAN_BINARY_URL = http://&lt;release&gt;-dsxa-scanner:5000/scan/binary/v2</code>
You can still override this env if you’re pointing at an external DSXA.</p>
<blockquote>
<p><strong>Remember:</strong> the inline DSXA scanner needs real credentials. Override <code>dsxa-scanner.env.APPLIANCE_URL</code>, <code>dsxa-scanner.env.TOKEN</code>, and <code>dsxa-scanner.env.SCANNER_ID</code> (ideally via Secrets) before enabling it anywhere beyond local testing.</p>
</blockquote>
<h2 id="image-version-overrides">Image Version Overrides<a class="headerlink" href="#image-version-overrides" title="Permanent link">&para;</a></h2>
<p>How image tags are chosen:</p>
<ul>
<li>From local chart path (this repo): templates default to the chart <code>appVersion</code> unless you override <code>global.image.tag</code> (or per-component <code>image.tag</code>).</li>
<li>From OCI registry (helm install oci://… --version X.Y.Z): Helm pulls the chart at that version; templates use that chart’s <code>appVersion</code> as the default image tag. You can still override with <code>--set-string global.image.tag=...</code> if needed.</li>
</ul>
<p>Override examples (no need to edit <code>values.yaml</code>):</p>
<ul>
<li>
<p>All components (via global image tag):</p>
<ul>
<li><code>helm upgrade --install dsx . -f values.yaml --set-string global.image.tag=0.2.66</code></li>
<li>Later: <code>helm upgrade dsx . --reuse-values --set-string global.image.tag=0.2.67</code></li>
</ul>
</li>
<li>
<p>Single component override:</p>
<ul>
<li>API only: <code>helm upgrade dsx . --reuse-values --set-string dsx-connect-api.image.tag=0.2.66</code></li>
<li>Results worker: <code>helm upgrade dsx . --reuse-values --set-string dsx-connect-results-worker.image.tag=0.2.66</code></li>
</ul>
</li>
<li>
<p>Quick hot-fix without Helm (not recommended long-term):</p>
<ul>
<li><code>kubectl set image deploy/dsx-connect-api dsx-connect-api=dsxconnect/dsx-connect:0.2.66</code></li>
<li><code>kubectl rollout status deploy/dsx-connect-api</code></li>
</ul>
</li>
</ul>
<p>Tip: In CI, drive the tag with a variable, e.g.</p>
<div class="highlight"><pre><span></span><code>TAG=&quot;$(git describe --tags --always)&quot;
helm upgrade dsx . --reuse-values --set-string global.image.tag=&quot;$TAG&quot;
</code></pre></div>
<h2 id="authentication-support">Authentication Support<a class="headerlink" href="#authentication-support" title="Permanent link">&para;</a></h2>
<h3 id="enrollment-token-via-secret-optional-but-recommended">Enrollment Token via Secret (optional, but recommended)<a class="headerlink" href="#enrollment-token-via-secret-optional-but-recommended" title="Permanent link">&para;</a></h3>
<p>Use an enrollment token to bootstrap connector registration. After registration, HMAC authenticates both directions.</p>
<p>Option A (recommended): apply the provided Secret manifest and reference it implicitly</p>
<p>1) Copy and edit <code>dsx-connect-&lt;version&gt;/helm/examples/secrets/auth-enrollment-secret.yaml</code> (set your namespace and token), then apply:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>examples/secrets/auth-enrollment-secret.yaml
</code></pre></div>
<p>2) Enable auth in values without embedding the token:</p>
<div class="highlight"><pre><span></span><code><span class="nt">dsx-connect-api</span><span class="p">:</span>
<span class="w">  </span><span class="nt">auth</span><span class="p">:</span>
<span class="w">    </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">enrollment</span><span class="p">:</span>
<span class="w">      </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ENROLLMENT_TOKEN</span>
<span class="w">      </span><span class="c1"># value: &quot;&quot;   # leave empty to use the external Secret created above</span>
</code></pre></div>
<p>Option B (demo only): embed the token so the chart creates the Secret for you</p>
<div class="highlight"><pre><span></span><code><span class="nt">dsx-connect-api</span><span class="p">:</span>
<span class="w">  </span><span class="nt">auth</span><span class="p">:</span>
<span class="w">    </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">enrollment</span><span class="p">:</span>
<span class="w">      </span><span class="nt">key</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ENROLLMENT_TOKEN</span>
<span class="w">      </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&lt;strong-random&gt;&quot;</span>
</code></pre></div>
<p>Connector charts:
- Set <code>auth.enabled=true</code> to verify HMAC on private routes.
- Provide the same token to connectors via <code>auth_dsxconnect.enrollmentSecretName</code>/<code>enrollmentKey</code> so they set <code>DSXCONNECT_ENROLLMENT_TOKEN</code>.
- Expose only <code>/webhook_event</code> via Ingress; use NetworkPolicies to allow traffic from dsx‑connect and your ingress controller.</p>
<p>Notes:
- Swagger remains available for docs; “Try it out” will not work for HMAC‑protected connector endpoints.
- Frontend (user) auth is separate (recommend an Ingress with OIDC/oauth2‑proxy in production).</p>
<h3 id="dianna-api-token-via-secret-required-if-dianna-workers-enabled">DIANNA API Token via Secret (required if DIANNA workers enabled)<a class="headerlink" href="#dianna-api-token-via-secret-required-if-dianna-workers-enabled" title="Permanent link">&para;</a></h3>
<p>For production, source the DIANNA API token from a Kubernetes Secret rather than embedding it in values or passing it on the CLI.</p>
<p>1) Create the DI secret (see the sample <code>examples/secrets/di-api-secret.yaml</code> earlier in this guide) so it contains both <code>apiToken</code> and <code>managementUrl</code>.</p>
<p>2) Reference that secret from your values file (recommended so it applies to the API and every worker):</p>
<div class="highlight"><pre><span></span><code><span class="c1"># values-dianna.yaml</span>
<span class="nt">global</span><span class="p">:</span>
<span class="w">  </span><span class="nt">dianna</span><span class="p">:</span>
<span class="w">    </span><span class="nt">secretName</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;di-api&quot;</span>
<span class="w">    </span><span class="c1"># managementUrlKey/apiTokenKey default to managementUrl/apiToken; override only if you rename keys.</span>
<span class="w">    </span><span class="nt">verifyTls</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">    </span><span class="nt">chunkSize</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">4194304</span>
<span class="w">    </span><span class="nt">timeout</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">60</span>
<span class="w">    </span><span class="nt">autoOnMalicious</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">false</span>

<span class="nt">dsx-connect-dianna-worker</span><span class="p">:</span>
<span class="w">  </span><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<span class="w">  </span><span class="nt">celery</span><span class="p">:</span>
<span class="w">    </span><span class="nt">concurrency</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">2</span>
</code></pre></div>
<p>Install:</p>
<div class="highlight"><pre><span></span><code>helm<span class="w"> </span>upgrade<span class="w"> </span>--install<span class="w"> </span>dsx<span class="w"> </span>dsx_connect/deploy/helm<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-f<span class="w"> </span>dsx_connect/deploy/helm/values.yaml<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-f<span class="w"> </span>values-dianna.yaml<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--set-string<span class="w"> </span>global.env.DSXCONNECT_SCANNER__SCAN_BINARY_URL<span class="o">=</span>https://my-dsxa.example.com/scan/binary/v2<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>--set-string<span class="w"> </span>global.image.tag<span class="o">=</span>&lt;version&gt;
</code></pre></div>
<p>3) Queue name and scaling:</p>
<pre><code>- Queue defaults to `dev.dsx_connect.analyze.dianna` (prefix derived automatically).
- Override with `dsx-connect-dianna-worker.celery.queue` if you run multiple isolated environments against the same Redis broker.
</code></pre>
<ul>
<li>Scale parallelism via <code>dsx-connect-dianna-worker.celery.concurrency</code>.</li>
</ul>
<h2 id="concurrency-and-replicas">Concurrency and Replicas<a class="headerlink" href="#concurrency-and-replicas" title="Permanent link">&para;</a></h2>
<p>Workers scale with two knobs. Use them together for best results:</p>
<ul>
<li>Replica count (<code>replicaCount</code>): number of pods. Each pod has its own CPU/memory limits/requests and its own Celery process. Good for horizontal scaling and resilience.</li>
<li>Concurrency (<code>celery.concurrency</code>): number of task workers inside one pod. Increases parallelism within a pod; shares that pod’s resources.</li>
</ul>
<p>Guidance:</p>
<ul>
<li>The Scan request workers are generally the place to start with concurrency.  These workers take enqueued scan request tasks, reads a file from a connector, and sends the file to DSXA for scanning.
  Needless to say, a single pod / single celery worker can only handle a single scan request at a time.</li>
<li>Start by raising <code>celery.concurrency</code> modestly (2–4), then add <code>replicaCount</code> to spread load across nodes.</li>
<li>If CPU-bound within a pod, increase pod resources or add replicas. If I/O-bound (network/Redis/HTTP), modest concurrency increases often help.</li>
<li>Example: 3 pods × concurrency 3 ≈ 9 workers on the queue.</li>
<li>Scale downstream workers (verdict/result/notification) when increasing request throughput to avoid bottlenecks.</li>
</ul>
<h4 id="practical-tuning-tips">Practical Tuning Tips<a class="headerlink" href="#practical-tuning-tips" title="Permanent link">&para;</a></h4>
<ul>
<li>Continue favoring modest Celery concurrency (2–4) before adding pods; add replicas when you see CPU saturation or want resiliency.</li>
<li>For connectors, bump <code>workers</code> to 2–4 if read_file handlers are CPU-bound or you want more in-pod parallel reads; add connector replicas if a single pod’s CPU or network is saturated, or for HA.</li>
<li>If you notice uneven distribution across connector replicas due to HTTP keep-alive, higher Celery concurrency tends to open more connections and spread load better; you can also tune httpx connection limits if needed later.</li>
</ul>
<h4 id="note-on-connector-replicas">Note on Connector Replicas<a class="headerlink" href="#note-on-connector-replicas" title="Permanent link">&para;</a></h4>
<p>Connectors also have a replicaCount, but it's important to understand what it's doing:</p>
<ul>
<li>Setting a connector chart’s <code>replicaCount &gt; 1</code> deploys multiple identical connector pods that each register independently with dsx-connect, each with a unique connector UUID. The UI will show multiple connectors for the same asset/filter.</li>
<li>A Full Scan request (from the UI or API) targets a single registered connector instance. Increasing <code>replicaCount</code> does not parallelize a single full-scan enqueue path.</li>
<li>Where replicas do help:<ul>
<li>High availability (one pod can restart while another continues to serve), and</li>
<li>Serving concurrent <code>read_file</code> requests from the dsx-connect scan-request workers (Kubernetes Service balances connections across pods; higher Celery concurrency opens more connections and spreads load).
To parallelize work across a single asset intentionally, prefer:</li>
<li>Increasing connector <code>workers</code> (Uvicorn processes) for in-pod concurrency, and/or</li>
<li>Running multiple connector releases with different <code>DSXCONNECTOR_FILTER</code> partitions (sharding), so Full Scan is performed in parallel across slices by distinct connector instances.</li>
</ul>
</li>
</ul>
<hr />
<h2 id="ingress-load-balancer-examples">Ingress &amp; Load Balancer Examples<a class="headerlink" href="#ingress-load-balancer-examples" title="Permanent link">&para;</a></h2>
<p>The core chart deliberately stops at ClusterIP services so it works across any platform. If you need ingress routes or load balancer services, use the sample manifests under <code>dsx_connect/deploy/helm/examples/ingress/</code>.</p>
<ul>
<li>Pick the file that matches your environment (e.g., <code>ingress-colima.yaml</code>, <code>ingress-eks-alb.yaml</code>, <code>openshift-route.yaml</code>)</li>
<li>Edit hosts/TLS secrets as needed</li>
<li>Apply it after installing the chart:</li>
</ul>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>apply<span class="w"> </span>-f<span class="w"> </span>dsx_connect/deploy/helm/examples/ingress/ingress-colima.yaml
</code></pre></div>
<p>These are meant as starting points—feel free to adapt or author your own ingress resources if your environment requires different settings.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://hub.docker.com/repositories/dsxconnect?_gl=1*19x8nn4*_gcl_au*MTgwNTA2MDE3LjE3NTc0NTQzNzc.*_ga*MTgxNzEzODA0NC4xNzExNDc0OTE4*_ga_XJWPQMJYHQ*czE3NjQ5NjE1NTYkbzEwMCRnMSR0MTc2NDk2MTczNSRqMTgkbDAkaDA." target="_blank" rel="noopener" title="hub.docker.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M349.9 236.3h-66.1v-59.4h66.1zm0-204.3h-66.1v60.7h66.1zm78.2 144.8H362v59.4h66.1zm-156.3-72.1h-66.1v60.1h66.1zm78.1 0h-66.1v60.1h66.1zm276.8 100c-14.4-9.7-47.6-13.2-73.1-8.4-3.3-24-16.7-44.9-41.1-63.7l-14-9.3-9.3 14c-18.4 27.8-23.4 73.6-3.7 103.8-8.7 4.7-25.8 11.1-48.4 10.7H2.4c-8.7 50.8 5.8 116.8 44 162.1 37.1 43.9 92.7 66.2 165.4 66.2 157.4 0 273.9-72.5 328.4-204.2 21.4.4 67.6.1 91.3-45.2 1.5-2.5 6.6-13.2 8.5-17.1zm-511.1-27.9h-66v59.4h66.1v-59.4zm78.1 0h-66.1v59.4h66.1zm78.1 0h-66.1v59.4h66.1zm-78.1-72.1h-66.1v60.1h66.1z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../../..", "features": ["navigation.instant", "navigation.tracking", "navigation.path", "navigation.top", "content.code.copy", "search.suggest", "search.highlight"], "search": "../../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
        <script src="https://unpkg.com/mermaid@10.9.1/dist/mermaid.min.js"></script>
      
    
  </body>
</html>