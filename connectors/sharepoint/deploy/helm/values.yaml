image:
  repository: dsxconnect/sharepoint-connector
  pullPolicy: IfNotPresent
  # Overrides the image tag whose default is the chart AppVersion.
  tag: ""
  # When installing from OCI (`--version=X.Y.Z`), the default image tag is that chart's appVersion.

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

service:
  type: ClusterIP
  port: 80

tls:
  enabled: false

ingressWebhook:
  enabled: false
  className: ""
  annotations: {}
  hosts: []
  tls: []

networkPolicy:
  enabled: false
  allowFrom: []

env:
  LOG_LEVEL: "debug"
  # Optional friendly display name shown in the dsx-connect UI card
  # DSXCONNECTOR_DISPLAY_NAME: "SharePoint Connector"
  DSXCONNECTOR_TLS_CERTFILE: "/app/certs/tls.crt"
  DSXCONNECTOR_TLS_KEYFILE: "/app/certs/tls.key"
  # Outbound TLS verification to dsx-connect
  # DSXCONNECTOR_VERIFY_TLS: "true"
  # DSXCONNECTOR_CA_BUNDLE: "/app/certs/ca.pem"
  # DSXCONNECTOR_DSX_CONNECT_URL: "https://my-dsx-connect.example.com"
  DSXCONNECTOR_ITEM_ACTION: "nothing"
  DSXCONNECTOR_ITEM_ACTION_MOVE_METAINFO: "dsxconnect-quarantine"
  DSXCONNECTOR_ASSET: ""                      # SharePoint URL (site/doc lib or folder)
  DSXCONNECTOR_FILTER: ""
  DSXCONNECTOR_DATA_DIR: "/app/data"
  # Enable Microsoft Graph change notifications (requires public HTTPS callback)
  # DSXCONNECTOR_SP_WEBHOOK_ENABLED: "true"
  # DSXCONNECTOR_WEBHOOK_URL: "https://sharepoint-connector.example.com"
  # DSXCONNECTOR_SP_WEBHOOK_CLIENT_STATE: "optional-shared-secret"
  # DSXCONNECTOR_SP_WEBHOOK_CHANGE_TYPES: "created,updated"
  # DSXCONNECTOR_SP_WEBHOOK_EXPIRE_MINUTES: "60"
  # DSXCONNECTOR_SP_WEBHOOK_REFRESH_SECONDS: "900"

# Optional list of Secret names projected via envFrom (each Secret should contain DSXCONNECTOR_* keys)
envSecretRefs: []

auth_dsxconnect:
  enabled: false
  clockSkewSeconds: 60
  enrollmentSecretName: ""
  enrollmentKey: ENROLLMENT_TOKEN  # Secret providing DSXCONNECT_ENROLLMENT_TOKEN when dsx-connect auth is enabled

secrets:
  # Name of the Secret containing SharePoint App credentials
  name: sharepoint-credentials

dataVolume:
  enabled: true
  mountPath: "/app/data"

# Uvicorn concurrency and pod replicas
# 'workers' = Uvicorn worker processes per pod (in-pod parallelism)
# 'replicaCount' = number of pods (horizontal scale/HA)
workers: 1
replicaCount: 1  # Does not parallelize Full Scan enumeration; replicas still serve concurrent read_file via Service LB.
